{% extends 'home.html' %}
{% load static %}

{% block content_2 %}
<div class="container-fluid">
    <h3 class="text-dark mb-4">Evaluación de transporte
    </h3>
            
            
    <div class="row mb-3">
        <div class="col-lg-4">
            <div class="row">
                <div class="col">
                    <div class="card shadow mb-3">
                        <div class="card-header py-3">
                            <p class="text-primary m-0 font-weight-bold">¿Cuál empresa desea evaluar?</p>
                        </div>
                        <div class="card-body">
                            {% for obj in registered_companies %} 
                                <a href="/evaluaciones/?id={{ obj.id }}"> {{ obj.nombre }} </a><br>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-8">
                <div class="row">
                    <div class="col">
                        <div class="card shadow mb-3">
                            <div class="card-header py-3">
                                <p class="text-primary m-0 font-weight-bold">Evaluaciones de los usuarios</p>
                            </div>
                            <div class="card-body">
                                {% if score == 0 %}
                                    <!-- {% for i in range5 %}
                                        <img class="img-fluid" src='{% static "assets/img/empty_star.png"%}'>
                                    {% endfor %} -->
                                    Sin evaluaciones.
                                {% endif %}
                                {% for i in score_range %}
                                    <img class="img-fluid" src='{% static "assets/img/blue_filled_star.png"%}'>
                                {% endfor %}
								<br>
								<label>Tú puntuacion?</label>
								<!--<div style="position:absolute; z-index:-1;">
									<img class="img-fluid" src='{% static "assets/img/empty_star.png"%}'>
									<img class="img-fluid" src='{% static "assets/img/empty_star.png"%}'>
									<img class="img-fluid" src='{% static "assets/img/empty_star.png"%}'>
									<img class="img-fluid" src='{% static "assets/img/empty_star.png"%}'>
									<img class="img-fluid" src='{% static "assets/img/empty_star.png"%}'>
								</div>-->
								<br>
								<a href="/evaluaciones/?stars=1&id={{empresa_id}}"><img id="star_1" class="img-fluid" style="opacity:0;" v-on:mouseenter="display" v-on:mouseleave="hide" src='{% static "assets/img/filled_star.png"%}'></a>
								<a href="/evaluaciones/?stars=2&id={{empresa_id}}"><img id="star_2" class="img-fluid" style="opacity:0;" v-on:mouseenter="display" v-on:mouseleave="hide" src='{% static "assets/img/filled_star.png"%}'></a>
								<a href="/evaluaciones/?stars=3&id={{empresa_id}}"><img id="star_3" class="img-fluid" style="opacity:0;" v-on:mouseenter="display" v-on:mouseleave="hide" src='{% static "assets/img/filled_star.png"%}'></a>
								<a href="/evaluaciones/?stars=4&id={{empresa_id}}"><img id="star_4" class="img-fluid" style="opacity:0;" v-on:mouseenter="display" v-on:mouseleave="hide" src='{% static "assets/img/filled_star.png"%}'></a>
								<a href="/evaluaciones/?stars=5&id={{empresa_id}}"><img id="star_5" class="img-fluid" style="opacity:0;" v-on:mouseenter="display" v-on:mouseleave="hide" src='{% static "assets/img/filled_star.png"%}'></a>

								<script>
									var star1 = new Vue({
									  el: '#star_1',
									  methods: {
										display: function(event){
											document.getElementById("star_2").setAttribute("style","opacity:0;")
											document.getElementById("star_3").setAttribute("style","opacity:0;")
											document.getElementById("star_4").setAttribute("style","opacity:0;")
											document.getElementById("star_5").setAttribute("style","opacity:0;")
											event.srcElement.setAttribute("style","opacity:1;")
										},
										hide: function(event){
											event.srcElement.setAttribute("style","opacity:0;")
										},
										save: function(event){
										
										}
									  }
									})
									
									var star2 = new Vue({
									  el: '#star_2',
									  methods: {
										display: function(event){
											document.getElementById("star_1").setAttribute("style","opacity:1;")
											event.srcElement.setAttribute("style","opacity:1;")
											document.getElementById("star_3").setAttribute("style","opacity:0;")
											document.getElementById("star_4").setAttribute("style","opacity:0;")
											document.getElementById("star_5").setAttribute("style","opacity:0;")
										},
										hide: function(event){
											event.srcElement.setAttribute("style","opacity:0;")
										}
									  }
									})
									
									var star3 = new Vue({
									  el: '#star_3',
									  methods: {
										display: function(event){
											document.getElementById("star_1").setAttribute("style","opacity:1;")
											document.getElementById("star_2").setAttribute("style","opacity:1;")
											event.srcElement.setAttribute("style","opacity:1;")
											document.getElementById("star_4").setAttribute("style","opacity:0;")
											document.getElementById("star_5").setAttribute("style","opacity:0;")
										},
										hide: function(event){
											event.srcElement.setAttribute("style","opacity:0;")
										}
									  }
									})
									
									var star4 = new Vue({
									  el: '#star_4',
									  methods: {
										display: function(event){
											document.getElementById("star_1").setAttribute("style","opacity:1;")
											document.getElementById("star_2").setAttribute("style","opacity:1;")
											document.getElementById("star_3").setAttribute("style","opacity:1;")
											event.srcElement.setAttribute("style","opacity:1;")
											document.getElementById("star_5").setAttribute("style","opacity:0;")
										},
										hide: function(event){
											event.srcElement.setAttribute("style","opacity:0;")
										}
									  }
									})
									
									var star5 = new Vue({
									  el: '#star_5',
									  methods: {
										display: function(event){
											document.getElementById("star_1").setAttribute("style","opacity:1;")
											document.getElementById("star_2").setAttribute("style","opacity:1;")
											document.getElementById("star_3").setAttribute("style","opacity:1;")
											document.getElementById("star_4").setAttribute("style","opacity:1;")
											event.srcElement.setAttribute("style","opacity:1;")
										},
										hide: function(event){
											event.srcElement.setAttribute("style","opacity:0;")
										}
									  }
									})
								</script>
                            </div>
                            <div class="card-body">
                                {% for obj in evaluaciones %}
                                    <p><b>{{ obj.usuario }}</b> calificó con <b>{{ obj.estrellas }}</b> de 5 estrellas - <i>{{ obj.comentario }}</i><br></p>
                                {% endfor %}
                            </div>
                            <!--<div class="btn-group">
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Evaluar
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" href="/evaluaciones/?stars=5&id={{empresa_id}}">5 estrellas</a>
                                    <a class="dropdown-item" href="/evaluaciones/?stars=4&id={{empresa_id}}">4 estrellas</a>
                                    <a class="dropdown-item" href="/evaluaciones/?stars=3&id={{empresa_id}}">3 estrellas</a>
                                    <a class="dropdown-item" href="/evaluaciones/?stars=2&id={{empresa_id}}">2 estrellas</a>
                                    <a class="dropdown-item" href="/evaluaciones/?stars=1&id={{empresa_id}}">1 estrella</a>
                                </div>
                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
    </div>
    
    <div class="card shadow mb-5"></div>
</div>
{% endblock %}